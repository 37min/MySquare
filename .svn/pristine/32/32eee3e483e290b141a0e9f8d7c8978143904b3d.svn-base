<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.mysquare.dao.ReviewDao">
	
	<insert id="insertReview">
	INSERT INTO Review (revcode, locName, id, revGroupCode, revName, revImage, revContents, revdate)
	VALUES(REVIEW_REVCODE_SEQ.NEXTVAL, #{locName}, #{id}, #{revGroupCode}, #{revName}, #{revImage}, #{revContents},  SYSDATE)
	</insert>
	
	<select id="getReviewByRevCode" resultType="kr.co.mysquare.dto.Review">
		SELECT revcode, locname, id, revgroupcode, revname, revimage, revcontents, revdate
		FROM review WHERE revcode = #{revCode}
	</select>
	
	<select id="getRevGroup" resultType="kr.co.mysquare.dto.RevGroup">
		SELECT revgroupcode, revgroupname FROM REVGROUP
	</select>
	
	<select id="getAllCommByRevCode" resultType="kr.co.mysquare.dto.Comm">
		SELECT * FROM comm WHERE revcode = #{revCode}
	</select>
	
	<insert id="insertComm">
		INSERT INTO COMM(commcode, revcode, commcontents, commdate, commid)
		VALUES (COMM_COMMCODE_SEQ.NEXTVAL, #{revCode}, #{commContents}, SYSDATE, #{commId})
	</insert>
	
	<delete id="deleteComm">
		DELETE FROM comm WHERE commcode = #{commCode}
	</delete>
	
	

</mapper>